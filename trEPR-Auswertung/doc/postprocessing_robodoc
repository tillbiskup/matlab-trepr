#!/bin/bash
#
# (c) 2007, Till Biskup <till.biskup@physik.fu-berlin.de Till Biskup>
#
# script for postprocessing the documentation generated with ROBODoc
# using sed and other tricks
#
# The aim of this script is to yield a set of (X)HTML file bodies originally
# created by ROBODoc that fit well into my personal homepage at the FU Berlin

FILENAME=${1/\.html}

# first step: removing all the unnecessary <span class="">...</span> tags
#             that produce these lots of tidy warnings and remove as well the 
#             trailing </body> and </html> tags
sed -E -e '1x' -e '2,2d' -e '$g' -e 's/<span class="[A-Z_]*">//' -e 's/<\/span>//' -e 's/<p><\/p>//' -e 's/<p>\n<\/p>//' -e 's/<p>\[<a [^]]*>\]<\/p>//' -e 's/<hr \/>//' -e 's/<\/?a[^>]*>//' -e 's/<a name[^>]*>/ /' -e 's/Generated from \.\/[A-Za-z_-]*\.m/Generated/' -e 's/Generated<\/a>/<p>Generated/' -e 's/h2>/h1>/' -e 's/<h1>[^\/]*/<h1>/' $1 > ${FILENAME}.php

# second step: deleting the html files
rm ${FILENAME}.html
